<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Add Patient Vaccine Record</title>
        <!-- Missouri COVID-19 Vaccine Tracker Application Filename: index.html Team: Turtle Shell
        Development Authors: Katherine Geist Date: 13 Oct 2022 -->

        <meta charset="utf-8">

        <!-- ======== EXTERNAL SCRIPTS ========================= -->
        <link rel="stylesheet" href="../assets/css/records/add.css">
        <script src="../assets/js/add_record.js" type="text/javascript" defer="defer"></script>
        <script src="../assets/js/modernizr.custom.40753.js" type="text/javascript"></script>
<!--         <script src="../assets/js/patient_records/print_VIS.js" type="text/javascript"></script> -->

        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT"
            crossorigin="anonymous">
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8"
            crossorigin="anonymous"></script>
    </head>

   
    <body id="add_record_body">
        <!-- ======== HEADER ========================= -->
        <!-- Written by KSG -->
        ${header}

        <!-- ======== PATIENT INPUT FORM ========================= -->
        <!-- Written by KSG -->
        <form action="AddRecord" method="POST">
            <fieldset class="form-control">
                <div class="input-group">
                    <span class="input-group-text" id="basic-addon2">Date</span>
                    <input
                        type="date"
                        class="form-control"
                        aria-describedby="basic-addon2"
                        name="curr-date"
                        id="date-input"
                        readonly
                        required="required">
                </div>
                <br>
                <legend>PATIENT RECEIVING VACCINE</legend>
                <div class="field-flex">
                    <label for="fname">First Name
                        <input type="text" id="fname" name="fname" class="form-control name-fields">
                    </label>
                    <label for="mname">Middle Name
                        <input type="text" id="mname" name="mname" class="form-control name-fields">
                    </label>
                    <label for="lname">Last Name
                        <input type="text" id="lname" name="lname" class="form-control name-fields">
                    </label>
                    <label for="ss4">SSN (Last 4)
                        <input type="text" id="ss4" name="ss4" class="form-control" maxlength="4">
                    </label>
                </div>
                <label for="dob">Date of birth:</label>
                <input type="date" id="dob" name="dob" class="form-control"><br>
                <fieldset class="form-control">
                    <legend>CONTACT INFORMATION</legend>

                    <label for="address">Address:</label>
                    <input for="text" id="address" name="address" class="form-control">
                    <div class="field-flex">
                        <!-- Dropdown for Phone Type -->
                        <label for="phoneType">Phone Type
                            <select type="phone" id="phoneType" name="PhoneType" class="form-select">
                                <option value="Home">Home</option>
                                <option value="Mobile">Mobile</option>
                                <option value="Work">Work</option>
                            </select>
                        </label>
                        <label for="phone">Phone Number
                            <input for="text" id="phone" name="phone" class="form-control">
                        </label>
                        <label for="email">Email Address:
                            <input type="email" id="email" name="email" class="form-control">
                        </label>
                        <br>
                    </div>
                </fieldset>
                <br>
                <fieldset class="form-control">
                    <legend>INSURANCE INFORMATION</legend>

                    <label for="insProvider">Insurance Provider:</label>
                    <input for="text" id="insProvider" name="insProvider" class="form-control"><br>

                    <label for="insGroup">Group Number:</label>
                    <input for="text" id="insGroup" name="insGroup" class="form-control"><br>

                    <label for="insPolicy">Policy Number:</label>
                    <input for="text" id="insPolicy" name="insPolicy" class="form-control"><br>
                </fieldset>
                <br>
            
            
            </fieldset>
            <br>
            <fieldset class="form-control">
                <legend>VACCINE ADMINISTERED</legend>
                    <p>Current COVID-19 Vaccine Dosing Schedule (All Manufacturers)</p>
                    <iframe id="dose_schedule"
						title="COVID-19 Dose Schedule as of Oct 2022"
						height="300"
						width="720"
						src="https://www.cdc.gov/vaccines/covid-19/downloads/COVID-19-immunization-schedule-ages-6months-older.pdf">
					</iframe>
					
                <!-- Vaccine Manufacturer Radio Button -->
                <p>Vaccine Manufacturer:</p>
                <input type="radio" id="pfizer" name="vaxMan" value="pfizer" class="vaxMan">
                <label for="pfizer" class="vaxMan-label">Pfizer-BioNTech</label><br>
                <input type="radio" id="moderna" name="vaxMan" value="moderna" class="vaxMan">
                <label for="moderna" class="vaxMan-label">Moderna</label><br>
                <input type="radio" id="janssen" name="vaxMan" value="janssen" class="vaxMan">
                <label for="janssen" class="vaxMan-label">Johnson & Johnsonâ€™s Janssen</label><br>
                <input type="radio" id="novavax" name="vaxMan" value="novavax" class="vaxMan">
                <label for="novavax" class="vaxMan-label">Novavax</label><br><br>
                <div class="field-flex">
                    <label for="lotNumber">Lot Number
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon1">#</span>
                            <input
                                type="text"
                                id="lotNumber"
                                name="lotNumber"
                                class="form-control"
                                aria-describedby="basic-addon1">
                        </div>
                    </label>

                    <!-- Dropdown for Vax Dose -->
                    <label for="dose">Please select the Vaccine Series Dose
                        <select id="dose" name="dose" class="form-select">
                            <option value="adDose1">Adult (18+) Primary Series, Monovalent Dose 1</option>
                            <option value="adDose2">Adult (18+) Primary Series, Monovalent Dose 2</option>
                            <option value="adBooster1">Adult (18+) Booster, Monovalent Dose 3 </option>
                            <option value="adBooster2">Adult (18+) Booster, Monovalent Dose 4</option>
                            <option value="adBoosterBiv">Adult (18+) Booster, Bivalent Dose 5</option>

                            <option value="teenDose1">Teen (12-17) Primary Series, Monovalent Dose 1</option>
                            <option value="teenDose2">Teen (12-17) Primary Series, Monovalent Dose 2</option>
                            <option value="teenBooster1">Teen (12-17) Booster, Monovalent Dose 3</option>
                            <option value="teenBoosterBiv">Teen (12-17) Booster, Bivalent Dose 4</option>

                            <option value="chDose1">Child (5-11) Primary Series, Monovalent Dose 1</option>
                            <option value="chDose2">Child (5-11) Primary Series, Monovalent Dose 2</option>
                            <option value="chBooster1">Child (5-11) Booster, Monovalent Dose 3</option>
                            <option value="chBoosterBiv">Child (5-11) Booster, Bivalent Dose 4</option>
                            
                            <option value="infDose1">Young Child (6mos-4) Primary Series, Monovalent Dose 1</option>
                            <option value="infDose2">Young Child (6mos-4) Primary Series, Monovalent Dose 2</option>
                            <option value="infBooster1">Young Child (6mos-4) Booster, Monovalent Dose 3</option>
                        </select>
                    </label>
                    <br>
                    

			
					<button class="print-button">Print Vaccine Information Sheet</button>
					 	<p>Choose language for printing:</p>
               			<input type="radio" id="english" name="lang" value="english" class="lang">
                		<label for="english" class="lang-label">English</label><br>
               			<input type="radio" id="spanish" name="lang" value="spanish" class="lang">
                		<label for="spanish" class="lang-label">Espa&ntildeol</label><br>

						<!-- for debugging -->
<!-- 
						<br>
						<br>
						<p> The value of dose: <span class="vax"></span> </p>
						<p> The value of manufacturer is: <span class="manu"></span> </p>
						<p> The language is: <span class="language"></span> </p>
 -->

                </div>
            </fieldset>
            <br>
            <input type="submit" value="Submit" class="form-control">
            <br>
            <br>
        </form>    
        <br>
        <!-- ============================================================================ -->
        <!-- ======== FOR ALL PAGES ========================= -->

        <!-- ======== HELP POPUP BUTTON ========================= -->
        <!-- Written by JM -->
        <div>
            <div class="modal">
                <div class="modal-content">
                    <span class="close-button">&times;</span>
                    <h1>Please contact the Missouri IIS for assistance!</h1>
                    <p>Phone: XXX-XXX-XXXX</p>
                    <p>Email: helpme@missouri.gov</p>
                </div>
            </div>
        </div>
  
  <script type="text/javascript">
	const dose = document.querySelector("#dose"); 
	const printButton = document.querySelector(".print-button");
	var url = "";
	var vaxMan = document.getElementsByName('vaxMan');
	var lang = document.getElementsByName('lang');

	function getFromRadio(radios) {
		// 	Get the manufacturer selected from the radio buttons
		for (var i = 0, length = radios.length; i < length; i++) {
		  if (radios[i].checked) {
			// 	Set the manufacturer flag
			val = radios[i].value;
			// Only one radio can be logically checked, so don't check the rest
			break;
		  }
		}	
	return val;
	}
	
	function getOptions() {
		// 	Get the vaccine dose selected from the dropdown
		vax = dose.options[dose.selectedIndex].value;
// 		document.querySelector('.vax').textContent = vax;
		
		manu = getFromRadio(vaxMan);
// 		document.querySelector('.manu').textContent = manu;
		
		language = getFromRadio(lang);
// 		document.querySelector('.language').textContent = language;

		// 	Pass to the fx where we actually open the VIS based on specs provided
		openVIS(lang, vax, manu);		
	}

	function openVIS(lang, vax, manu) {
		
		if(manu == "novavax") {
			if(language == "english") {
				if(vax == "adDose1" | vax == "teenDose1") {
					url = "https://www.fda.gov/media/159898/download";
				} else {
					window.alert("This vaccine dose not available for this manufacturer and/or age group.")
					url = "";
				}	
			}
			else if(language == "spanish") {
				if(vax == "adDose1" | vax == "teenDose1") {
					url = "https://www.fda.gov/media/160242/download";
				} else {
					window.alert("This vaccine dose not available for this manufacturer and/or age group.")
					url = "";
				}				
			}
		}
		
		if(manu == "janssen") {
			if(language == "english") {
				if(vax == "adDose1" | vax == "adDose2" | "adBoosterBiv") {
					url = "https://www.janssenlabels.com/emergency-use-authorization/Janssen+COVID-19+Vaccine-Recipient-fact-sheet.pdf";
				} else {
					window.alert("This vaccine dose not available for this manufacturer and/or age group.")
					url = "";
				}	
			}
			else if(language == "spanish") {
				if(vax == "adDose1" | vax == "adDose2" | "adBoosterBiv") {
					url = "https://www.janssenlabels.com/emergency-use-authorization/Janssen+COVID-19+Vaccine-Recipient-fact-sheet-es.pdf";
				} else {
					window.alert("This vaccine dose not available for this manufacturer and/or age group.")
					url = "";
				}				
			}
		}
		
		if(manu == "pfizer") {
			if(language == "english") {
				if(vax == "adDose1" | vax == "adDose2" | vax == "adBooster1" | vax == "adBooster2" | vax == "adBoosterBiv" | vax == "teenDose1" | vax == "teenDose2" | vax == "teenBooster1"  | vax == "teenBooster2" | vax == "teenBoosterBiv") {
					url = "https://labeling.pfizer.com/ShowLabeling.aspx?id=14472&format=pdf";
				} else if(vax == "chDose1" | vax == "chDose2" | vax == "chBooster1" | vax == "chBoosterBiv") {
					url = "https://labeling.pfizer.com/ShowLabeling.aspx?id=16074&format=pdf";
				} else if(vax == "infDose1" | vax == "infDose2" | vax == "infBooster1") {
					url = "https://labeling.pfizer.com/ShowLabeling.aspx?id=17228&format=pdf";
				} else {
					url = "";
				}
			}
		else if(language == "spanish") {
				if(vax == "adDose1" | vax == "adDose2" | vax == "adBooster1" | vax == "adBooster2" | vax == "adBoosterBiv" | vax == "teenDose1" | vax == "teenDose2" | vax == "teenBooster1" | vax == "teenBooster2" | vax == "teenBoosterBiv") {
					url = "https://webfiles.pfizer.com/spanisheuarecipientfs12yrsandup";
				} else if(vax == "chDose1" | vax == "chDose2" | vax == "chBooster1" | vax == "chBoosterBiv") {
					url = "https://webfiles.pfizer.com/spanisheuarecipientfs5through11years";
				} else if(vax == "infDose1" | vax == "infDose2" | vax == "infBooster1") {
					url = "https://webfiles.pfizer.com/spanisheuarecipientfs6mo4yr";
				} else {
					url = "";
				}
			}
		}
			
		if(manu == "moderna") {
			if(language == "english") {
				if(vax == "adDose1" | vax == "adDose2" | vax == "adBooster1" | vax == "adBooster2" | vax == "adBoosterBiv" | vax == "teenDose1" | vax == "teenDose2" | vax == "teenBooster1"  | vax == "teenBooster2" | vax == "teenBoosterBiv") {
					url = "https://eua.modernatx.com/covid19vaccine-eua/bivalent-dose-recipient.pdf";
				} else if(vax == "chDose1" | vax == "chDose2" | vax == "chBooster1" | vax == "chBoosterBiv") {
					url = "https://eua.modernatx.com/covid19vaccine-eua/6-11y-facts-recipient.pdf";
				} else if(vax == "infDose1" | vax == "infDose2" | vax == "infBooster1") {
					url = "https://eua.modernatx.com/covid19vaccine-eua/6m-5y-facts-recipient.pdf";
				} else {
					url = "";
				}
			}
		else if(language == "spanish") {
				if(vax == "adDose1" | vax == "adDose2" | vax == "adBooster1" | vax == "adBooster2" | vax == "adBoosterBiv" | vax == "teenDose1" | vax == "teenDose2" | vax == "teenBooster1"  | vax == "teenBooster2" | vax == "teenBoosterBiv") {
					url = "https://eua.modernatx.com/covid19vaccine-eua/EUAFactSheet-Recipients-Prime-Bivalent-Boost-12y+-Highlighted8.31.22_es-ES_Clean.pdf";
				} else if(vax == "chDose1" | vax == "chDose2" | vax == "chBooster1" | vax == "chBoosterBiv") {
					url = "https://eua.modernatx.com/covid19vaccine-eua/6-11y-facts-recipient_es-ES.pdf";
				} else if(vax == "infDose1" | vax == "infDose2" | vax == "infBooster1") {
					url = "https://eua.modernatx.com/covid19vaccine-eua/6m-5y-facts-recipient_es-ES.pdf";
				} else {
					url = "";
				}
			}		
		}
		
		// 	And then we don't want to open an empty webpage:
		if (url !== "") {
			window.open(url);	
		}
	}

	printButton.addEventListener("click", getOptions);

</script>     
 
    </body>